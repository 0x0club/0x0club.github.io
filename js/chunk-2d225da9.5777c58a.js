(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d225da9"],{e5be:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-layout",[a("div",{staticClass:"content text-center"},[a("h2",{staticClass:"my-30px"},[e._v("卡片市场价值估算:")]),a("p",[e._v(" 当前 "),a("strong",[e._v(" 1bnx = "+e._s(e.goldRatio)+" gold ")])]),a("div",[a("a-input-search",{staticStyle:{width:"500px"},attrs:{placeholder:"输入 token_id","enter-button":"价值估算",size:"large"},on:{search:e.calValueFromTokenId},model:{value:e.tokenId,callback:function(t){e.tokenId=t},expression:"tokenId"}})],1),a("br"),a("props-table",{attrs:{loading:e.loading,"data-source":e.propsDataSource}}),a("br"),a("price-table",{attrs:{loading:e.priceLoading,"data-source":e.priceDataSource}})],1)])},n=[],o=a("1da1"),i=(a("b680"),a("96cf"),a("9c9e")),c=a("db49"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-table",{attrs:{bordered:"",loading:e.loading,columns:e.tableColumns,"data-source":e.dataSourceWithKey,scroll:{x:!0},pagination:!1}})},d=[],u=a("5530"),s=(a("d81d"),a("ed08")),p={props:{dataSource:{type:Array,required:!0},loading:{type:Boolean,default:!0}},computed:{tableColumns:function(){return[{title:"卡片类型",width:90,dataIndex:"cardType"},{title:"等级",width:90,dataIndex:"level"},{title:"职业",width:90,dataIndex:"career"},{title:"力量",width:90,dataIndex:"strength"},{title:"敏捷",width:90,dataIndex:"agility"},{title:"体质",width:90,dataIndex:"physique"},{title:"意志",width:90,dataIndex:"volition"},{title:"智力",width:90,dataIndex:"brains"},{title:"精神",width:90,dataIndex:"charm"},{title:"每区块收益",width:90,dataIndex:"valPerBlock"},{title:"每天收益",width:90,dataIndex:"valPerDay"}]},dataSourceWithKey:function(){return this.dataSource.map((function(e){return Object(u["a"])(Object(u["a"])({},e),{},{key:Object(s["a"])()})}))}}},h=p,b=a("2877"),g=Object(b["a"])(h,l,d,!1,null,null,null),y=g.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-table",{attrs:{bordered:"",loading:e.loading,columns:e.tableColumns,"data-source":e.dataSourceWithKey,scroll:{x:!0},pagination:!1}})},w=[],m={props:{dataSource:{type:Array,required:!0},loading:{type:Boolean,default:!0}},computed:{tableColumns:function(){return[{title:"回本天数",width:90,dataIndex:"day"},{title:"售价",width:90,dataIndex:"price"},{title:"每日收益",width:90,dataIndex:"valPerDay"}]},dataSourceWithKey:function(){return this.dataSource.map((function(e){return Object(u["a"])(Object(u["a"])({},e),{},{key:Object(s["a"])()})}))}}},f=m,v=Object(b["a"])(f,x,w,!1,null,null,null),k=v.exports,I=28800,D={name:"MarketModel",mixins:[i["a"]],components:{PropsTable:y,PriceTable:k},data:function(){return{goldRatio:0,tokenId:"",loading:!1,startDay:29,endDay:39,priceLoading:!1,propsDataSource:[],priceDataSource:[]}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initWeb3Account();case 2:if(e.account){t.next=4;break}return t.abrupt("return");case 4:return e.initContract(),t.next=7,e.getGoldBnxRatio();case 7:case"end":return t.stop()}}),t)})))()},methods:{calValueFromTokenId:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:return t.loading=!0,a.next=5,t.playContract.methods.getPlayerInfoBySet(e).call();case 5:r=a.sent,t.loading=!1,r&&(n={strength:r[0][0],agility:r[0][1],physique:r[0][2],volition:r[0][3],brains:r[0][4],charm:r[0][5],level:r[0][6],career:Object(s["b"])(r[1])},o=t.calValPerBlock(n),i=o*I,n.valPerBlock="".concat(o.toFixed(4)," gold"),n.valPerDay="".concat(i.toFixed(2)," gold"),n.cardType=t.getCardType(n),console.log(t.getCardType(n)),t.propsDataSource=[],t.propsDataSource.push(n),t.priceLoading=!0,t.priceDataSource=t.calPriceInDays(i),t.priceLoading=!1);case 8:case"end":return a.stop()}}),a)})))()},getCardType:function(e){var t=e.strength,a=e.agility,r=e.physique,n=e.brains,o=e.charm,i=e.career,c=[];switch(i){case"法师":c=[n,o];break;case"战士":c=[t,r];break;case"游侠":c=[t,a];break;case"盗贼":c=[a,t];break}return c[0]>=86&&c[1]>=61?"矿卡":"黑卡"},calPriceInDays:function(e){for(var t=[],a=this.startDay;a<=this.endDay;a++)t.push({day:a,price:"".concat((a*e/this.goldRatio).toFixed(2)," bnx"),valPerDay:"".concat(e.toFixed(4)," gold")});return t},calValPerBlock:function(e){var t=e.strength,a=e.agility,r=e.physique,n=e.brains,o=e.charm,i=e.level,c=e.career,l="",d=[];switch(c){case"法师":l=n,d=[n,o];break;case"战士":l=t,d=[t,r];break;case"游侠":l=t,d=[t,a];break;case"盗贼":l=a,d=[a,t];break}return i>1&&d[0]>=86&&d[1]>=61?this.calVal(l,i):this.calVal(85,i)},calVal:function(e,t){var a=.01,r=.005*(e-85);return t>1?(a+r)*Math.pow(2,t-1):a},getGoldBnxRatio:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new e.web3.utils.BN("10000000000000000000"),t.next=3,e.pancakeContract.methods.getAmountsOut(a,[c["a"].bnxContrAddr,c["a"].busdContrAddr,c["a"].goldContrAddr]).call();case 3:r=t.sent,n=new e.web3.utils.BN(r[2]),o=n.div(e.web3.utils.toBN(10)),console.log(o),e.goldRatio=e.web3.utils.fromWei(o);case 8:case"end":return t.stop()}}),t)})))()}}},S=D,C=Object(b["a"])(S,r,n,!1,null,"e8b9aa12",null);t["default"]=C.exports}}]);
//# sourceMappingURL=chunk-2d225da9.5777c58a.js.map